!function(e){function t(){var t,n,i,l="prototype",s="scroll",o=Array[l].slice,h=e.setTimeout,r=[],f=function(e,t,n){this.element=e,this.threshold=t,this.callback=function(){n(e)}},c=function(){var i,l=r.length;if(l)for(t=e.scrollY||e.pageYOffset,n=t+e.innerHeight;l--;)i=r[l],i.visible()&&(h(i.callback,0),r.splice(l,1));else e.removeEventListener(s,c)};return f[l].visible=function(){var e=this.element,i=this.threshold,l=e.offsetTop-i,s=l+e.offsetHeight+i;return n>=l&&s>=t},function(t){if(t){var n,l=t.on,h=t.threshold!==i?t.threshold:100,a=t.callback;if(!l||!a)throw"elements or callback missing";if(l.length!==i)for(l=o.call(l),n=l.length;n--;)r.push(new f(l[n],h,a));else r.push(new f(l,h,a));c(),r.length&&e.addEventListener(s,c)}}}e.define&&e.define.amd?e.define("sloth",t):e.sloth=t()}(this);